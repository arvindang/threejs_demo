<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Lesson · Gearbox Assembly</title>

  <!-- Bootstrap 5 & icons -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
    crossorigin="anonymous"
  />

  <!-- three.js libraries - removed in favor of module imports -->
  
  <!-- Import maps to help resolve module names -->
  <script type="importmap">
    {
      "imports": {
        "three": "https://cdn.jsdelivr.net/npm/three@0.164.0/build/three.module.js",
        "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.164.0/examples/jsm/"
      }
    }
  </script>
</head>
<body class="bg-light">

  <!-- Lesson header -->
  <section class="container py-4">
    <h1 class="mb-0">Gearbox Fundamentals</h1>
    <p class="text-muted">Author · Arvin Dang</p>
    <p>
      In this lesson we examine the main components of a simple gearbox,
      exploring how torque is transferred through each stage.
    </p>
  </section>

  <!-- Card + viewer -->
  <div class="container pb-5">
    <div class="card shadow-sm">
      <div class="card-header d-flex align-items-center gap-3">
        <div class="d-flex flex-wrap align-items-center gap-3 w-100">
          <!-- Reset button -->
          <!-- <button id="btnReset" class="btn btn-sm btn-outline-secondary">
            Reset
          </button> -->
          <!-- Back button (initially hidden) -->
          <button id="btnBack" class="btn btn-sm btn-outline-secondary">
            Back to Full View
          </button>

          <!-- Explode slider -->
          <!-- <div class="d-flex align-items-center gap-2 flex-grow-1">
            <label for="explode" class="mb-0 me-2">Explode</label>
            <input id="explode" type="range" min="0" max="1" step="0.01" value="0" class="form-range flex-grow-1" />
          </div> -->

          <!-- Slice slider -->
          <!-- <div class="d-flex align-items-center gap-2 flex-grow-1">
            <label for="slice" class="mb-0 me-2">Slice</label>
            <input id="slice" type="range" min="-1" max="1" step="0.01" value="1" class="form-range flex-grow-1" />
          </div> -->

          <!-- Animation controls -->
          <!-- <div class="d-flex align-items-center gap-2 flex-grow-1">
            <label for="animate" class="mb-0 me-2">Animate</label>
            <select id="animate" class="form-select form-select-sm" style="width: 120px;">
              <option value="none">None</option>
              <option value="rotate">Rotate</option>
              <option value="drive">Drive</option>
            </select>
            <input id="animSpeed" type="range" min="0.1" max="2" step="0.1" value="1" class="form-range flex-grow-1 ms-2" />
          </div> -->
        </div>
      </div>

      <div class="card-body p-0">
        <!-- Viewer canvas will be inserted into this div -->
        <div id="viewer" style="width:100%;height:60vh"></div>
      </div>

      <div class="card-footer">
        <div class="d-flex align-items-center gap-3">
          <!-- Recording controls -->
          <button id="btnRecord" class="btn btn-danger rounded-circle d-flex align-items-center justify-content-center" title="Record" style="width: 38px; height: 38px;">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-record-circle" viewBox="0 0 16 16">
              <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
              <path d="M11 8a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"/>
            </svg>
          </button>
          <button id="btnStop" class="btn btn-secondary rounded-circle d-flex align-items-center justify-content-center" title="Stop" disabled style="width: 38px; height: 38px;">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-stop-fill" viewBox="0 0 16 16">
              <path d="M5 3.5h6A1.5 1.5 0 0 1 12.5 5v6a1.5 1.5 0 0 1-1.5 1.5H5A1.5 1.5 0 0 1 3.5 11V5A1.5 1.5 0 0 1 5 3.5z"/>
            </svg>
          </button>
          
          <button id="btnPlay" class="btn btn-primary d-flex align-items-center justify-content-center" title="Play" disabled style="width: 38px; height: 38px;">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-play-fill" viewBox="0 0 16 16">
              <path d="m11.596 8.697-6.363 3.692c-.54.313-1.233-.066-1.233-.697V4.308c0-.63.692-1.01 1.233-.696l6.363 3.692a.802.802 0 0 1 0 1.393z"/>
            </svg>
          </button>
          
          <button id="btnPause" class="btn btn-secondary d-flex align-items-center justify-content-center" title="Pause" disabled style="width: 38px; height: 38px;">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-pause-fill" viewBox="0 0 16 16">
              <path d="M5.5 3.5A1.5 1.5 0 0 1 7 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5zm5 0A1.5 1.5 0 0 1 12 5v6a1.5 1.5 0 0 1-3 0V5a1.5 1.5 0 0 1 1.5-1.5z"/>
            </svg>
          </button>
          
          <!-- Progress bar -->
          <div class="progress flex-grow-1">
            <div id="progressBar" class="progress-bar" role="progressbar" style="width: 0%;" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
          </div>
          
          <!-- Time display -->
          <span id="timeDisplay" class="text-muted">00:00</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Load the external viewer script -->
  <script type="module" src="viewer.js"></script>
</body>
</html>
